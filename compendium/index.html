<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b1014" />
  <title>Compendium</title>
  <link rel="manifest" href="../manifest.webmanifest" />
  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/compendium.css" />
  <script src="../js/loader.js" defer></script>
  <script type="module" src="../js/app.js" defer></script>
</head>
<body class="app-shell compendium-page" data-modules="compendium">
  <a class="skip-link" href="#main-content">Skip to main content</a>
  <header class="app-header surface-blur compendium-header">
    <div class="header-group">
      <p class="eyebrow">Reference Library</p>
      <h1 class="page-title">Compendium</h1>
    </div>
    <p id="compendium-pack-meta" class="pack-meta" aria-live="polite">Loading SRD entriesâ€¦</p>
    <div class="compendium-header__controls">
      <div class="pack-buttons">
        <button type="button" id="compendium-import-file" class="pill-button">Import JSON</button>
        <button type="button" id="compendium-import-url" class="pill-button">Add from URL</button>
        <button type="button" id="compendium-reload-packs" class="pill-button">Reload Packs</button>
      </div>
      <p id="compendium-pack-status" class="pack-status" aria-live="polite"></p>
    </div>
    <input type="file" id="compendium-pack-file" accept="application/json" hidden />
  </header>
  <main class="app-main compendium-main" id="main-content" tabindex="-1">
    <section class="compendium-panel">
      <div class="search-shell">
        <input type="search" id="search-input" placeholder="Search spells, feats, items, rules, monsters, skills, backgrounds, and races" aria-label="Search compendium" autocomplete="off" />
        <div class="chips" role="group" aria-label="Filters">
          <button class="chip" data-filter="spell" aria-pressed="false">Spell</button>
          <button class="chip" data-filter="feat" aria-pressed="false">Feat</button>
          <button class="chip" data-filter="item" aria-pressed="false">Item</button>
          <button class="chip" data-filter="rule" aria-pressed="false">Rule</button>
          <button class="chip" data-filter="monster" aria-pressed="false">Monster</button>
          <button class="chip" data-filter="skill" aria-pressed="false">Skill</button>
          <button class="chip" data-filter="background" aria-pressed="false">Background</button>
          <button class="chip" data-filter="race" aria-pressed="false">Race</button>
        </div>
      </div>
      <div class="viewport-shell">
        <div id="list-viewport" tabindex="0" role="list" aria-live="polite">
          <div id="virtual-list" class="virtual-list"></div>
          <p id="empty-state" class="empty-state" hidden>No matching entries. Try a different search or filter.</p>
        </div>
      </div>
    </section>
  </main>
  <p class="legal-link">
    <a href="../LEGAL/NOTICE.txt" target="_blank" rel="noopener noreferrer">SRD 5.1 licensing notice</a>
  </p>
  <aside id="detail-drawer" aria-modal="true" role="dialog" aria-hidden="true">
    <div class="drawer-handle" aria-hidden="true"></div>
    <header>
      <h2 id="detail-title">Detail</h2>
      <p id="detail-subtitle"></p>
    </header>
    <ul id="detail-tags" class="tag-list"></ul>
    <dl id="detail-stats" class="stat-grid"></dl>
    <div id="spell-panel" class="spell-panel-host" hidden></div>
    <div id="monster-panel" class="monster-panel-host" hidden></div>
    <div id="detail-body"></div>
    <div class="drawer-actions">
      <button type="button" id="builder-add">Add to Builder</button>
      <button type="button" id="favorite-toggle">Save to Favorites</button>
    </div>
    <p id="detail-status" role="status" aria-live="polite"></p>
  </aside>
  <div id="drawer-scrim" hidden></div>
</body>
</html>
